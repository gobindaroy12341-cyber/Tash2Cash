<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡¶Æ‡¶æ‡¶á ‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï - ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bangla:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{--bg:#f3e9f0;--card-shadow:0 8px 0 rgba(0,0,0,0.06),0 6px 18px rgba(0,0,0,0.08);--accent:#d32f2f;}
    *{box-sizing:border-box}
    body{font-family:'Noto Sans Bangla',sans-serif;margin:0;background:linear-gradient(180deg,#fffbff,#f3e9f0);min-height:100vh;}
    .topbar{background:#000;padding:6px 12px;color:#fff;display:flex;align-items:center;justify-content:center;position:sticky;top:0;z-index:30}
    .support-btn{background:var(--accent);color:#fff;padding:8px 14px;border-radius:6px;text-decoration:none;font-weight:700}
    header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px}
    .logo{display:flex;align-items:center;gap:10px}
    .logo .mark{width:36px;height:36px;border-radius:8px;background:#2e7d32;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    .hamburger{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:6px;cursor:pointer;font-size:20px}
    .container{padding:12px}
    .notice{background:#39a56a;color:#fff;padding:22px;border-radius:12px;text-align:center;box-shadow:var(--card-shadow);margin-bottom:16px}
    .notice h2{margin:0 0 8px;font-size:22px}
    .btn-red{background:#ff0000;color:#fff;border:none;padding:10px 18px;border-radius:8px;font-weight:700;cursor:pointer}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .card{background:#fff;padding:18px;border-radius:12px;box-shadow:var(--card-shadow);display:flex;flex-direction:column;gap:6px;min-height:110px}
    /* Drawer */
    .drawer{position:fixed;top:0;left:-260px;width:260px;height:100%;background:#fff;box-shadow:2px 0 10px rgba(0,0,0,0.2);transition:left 0.3s ease;z-index:1000;padding:20px;overflow:auto;}
    .drawer.open{left:0;}
    .drawer a{display:block;padding:10px 0;text-decoration:none;color:#000;font-weight:600;border-bottom:1px solid #ddd;cursor:pointer;}
    .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);display:none;z-index:900;}
    .overlay.show{display:block;}

    /* Modal */
    .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:2000;}
    .modal.show{display:flex;}
    .modal-content{background:#fff;padding:20px;border-radius:12px;max-width:400px;width:90%;box-shadow:0 6px 18px rgba(0,0,0,0.3);text-align:center}
    .grid-pay{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:10px}
    .pay-btn{background:#f8f8f8;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,0.1);padding:16px;font-weight:700;cursor:pointer;transition:0.2s;}
    .pay-btn:hover{background:#ececec}
    .pay-now{margin-top:15px;background:#d32f2f;color:#fff;padding:10px;border-radius:50px;border:none;font-size:18px;font-weight:700;width:100%;cursor:pointer}

    /* Notice */
    #modalNotice{background:#ffe082;color:#000;padding:10px;border-radius:8px;margin-bottom:10px;display:none;font-weight:700;text-align:center;}
    #noticeButtons{margin-top:10px;display:none;}

    /* Transaction Modal */
    #transactionModal .modal-content{text-align:left}
    .form-group{margin:12px 0}
    .form-group label{font-weight:600;display:block;margin-bottom:6px}
    .form-group input, .form-group select{width:100%;padding:10px;border:1px solid #ccc;border-radius:6px}
    .copy-btn{margin-left:10px;padding:6px 10px;border:none;background:#4caf50;color:#fff;border-radius:6px;cursor:pointer}
    .verify-btn{background:#2e7d32;color:#fff;padding:10px;width:100%;border:none;border-radius:8px;font-weight:700;margin-top:10px;cursor:pointer}
    .cancel-btn{background:#f44336;color:#fff;padding:10px;width:100%;border:none;border-radius:8px;font-weight:700;margin-top:10px;cursor:pointer}

    /* Work List Modal */
    #workListModal ul{list-style:none;padding:0;margin:0;text-align:left}
    #workListModal li{padding:8px 0;border-bottom:1px solid #ddd;font-weight:600}

    /* Refer Code Modal */
    #referCodeModal .modal-content{text-align:left}

    /* Auth Modals */
    #authModal .modal-content{text-align:left}
    .auth-tabs{display:flex;border-bottom:1px solid #ddd;margin-bottom:15px}
    .auth-tab{flex:1;text-align:center;padding:10px;cursor:pointer;font-weight:600}
    .auth-tab.active{background:#f0f0f0;border-bottom:2px solid #d32f2f}
    .auth-form{display:none}
    .auth-form.active{display:block}
    .toggle-auth{color:#d32f2f;cursor:pointer;text-align:center;margin-top:15px;font-weight:600}

    /* Toast Top Right */
    .toast{visibility:hidden;min-width:250px;background:#333;color:#fff;text-align:center;border-radius:8px;padding:12px;position:fixed;top:20px;right:20px;z-index:3000;font-weight:600;opacity:0;transition:opacity 0.5s, top 0.5s;}
    .toast.show{visibility:visible;opacity:1;top:50px;}

    /* User Info in Drawer */
    .user-drawer-info{background:#f5f5f5;padding:15px;border-radius:8px;margin-bottom:15px;text-align:center;}
    .user-avatar{width:50px;height:50px;border-radius:50%;background:#d32f2f;display:flex;align-items:center;justify-content:center;color:#fff;font-size:20px;font-weight:700;margin:0 auto 10px;}
    .user-name{font-size:18px;font-weight:700;margin-bottom:5px;}
    .user-status{font-size:14px;color:#666;}
    .user-status.active{color:#2e7d32;}
    .user-status.inactive{color:#d32f2f;}
    .user-details{font-size:12px;color:#888;margin-top:5px;}
    .refer-code-section{background:#e8f5e9;padding:10px;border-radius:6px;margin-top:10px;border:1px dashed #4caf50;}
    .refer-code-label{font-size:12px;color:#666;margin-bottom:5px;}
    .refer-code-value{font-size:14px;font-weight:700;color:#2e7d32;display:flex;justify-content:space-between;align-items:center;}
    .copy-refer-btn{background:#4caf50;color:#fff;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:10px;}

    /* Page layout (single page app) */
    .page{display:none}
    .page.active{display:block}

    /* My Team styles (scoped) */
    #myTeamPage{background: linear-gradient(180deg, #f6e9f2 0%, #e9dff7 40%, #f3eaf5 100%); min-height:calc(100vh - 60px); padding-bottom:32px;}
    #myTeamPage .welcome{background:#0b0b0b;color:#fff;padding:10px 16px;font-weight:700;text-align:center;letter-spacing:0.3px;width:100%;font-size:16px;overflow:hidden;position:relative;white-space:nowrap}
    #myTeamPage .welcome span{color:#ff3b30;font-weight:800;display:inline-block;animation: glow 2s ease-in-out infinite alternate}
    #myTeamPage .marquee-text{display:inline-block;position:relative;animation: scroll-left 10s linear infinite}
    @keyframes scroll-left {0% { transform: translateX(100%);}100% { transform: translateX(-100%);}}
    @keyframes glow{0%{ filter:brightness(1);}50%{ filter:brightness(1.5);}100%{ filter:brightness(1);}}

    #myTeamPage .team-container{width:100%;max-width:400px;margin:18px auto;padding:0 12px}
    #myTeamPage .card{background:rgba(255,255,255,0.95);border-radius:14px;padding:16px;box-shadow:0 6px 18px rgba(16,24,40,0.06);border:1px solid rgba(0,0,0,0.04);}
    .card-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .card-head h2{margin:0;font-size:20px;font-weight:700}
    .team-size{color:#6b7280;font-size:14px}
    .team-size strong{ color:#ff3b30; font-weight:800; margin-left:6px; }
    .gen-table{width:100%;border-collapse:collapse;background:transparent}
    .gen-table th, .gen-table td{ text-align:left;padding:14px 12px;border-bottom:1px solid rgba(0,0,0,0.06);font-size:15px }
    .gen-table th{ color:#374151;font-weight:700;background: rgba(255,255,255,0.6) }
    .sn{width:56px;color:#6b7280;font-weight:600}
    .generation{color:#111827}
    .count{color:#ff3b30;font-weight:800;margin-left:6px}

    /* Withdraw Page Styles */
    #withdrawPage{background: linear-gradient(180deg, #f6f7fb 0%, #e9ecf5 100%); min-height:calc(100vh - 60px); padding-bottom:32px;}
    .withdraw-header{background:linear-gradient(90deg, #ff512f, #dd2476);color:#fff;text-align:center;padding:16px;font-size:20px;font-weight:800;margin-bottom:20px;}
    .withdraw-container{max-width:480px;margin:0 auto;background:#fff;padding:20px 18px;border-radius:15px;box-shadow:0 8px 25px rgba(0,0,0,0.08);}
    .withdraw-form label{display:block;font-weight:700;margin:10px 0 6px}
    .withdraw-form select, .withdraw-form input{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:15px}
    .withdraw-form select:focus, .withdraw-form input:focus{border-color:#dd2476;outline:none;box-shadow:0 0 0 3px rgba(221,36,118,0.15);}
    .withdraw-btn{width:100%;background:linear-gradient(90deg, #ff512f, #dd2476);color:#fff;border:none;padding:12px;border-radius:10px;font-size:16px;font-weight:700;margin-top:10px;cursor:pointer;box-shadow:0 6px 18px rgba(221,36,118,0.18);}
    .withdraw-btn:disabled{opacity:0.6;cursor:not-allowed;}
    .withdraw-history{margin-top:30px}
    .withdraw-card{background:#fff;border-radius:12px;padding:14px;margin:10px 0;box-shadow:0 4px 12px rgba(0,0,0,0.06);}
    .withdraw-card p{margin:6px 0}
    .pending{color:#fca311;font-weight:800}
    .approved{color:#06d6a0;font-weight:800}
    .rejected{color:#e63946;font-weight:800}

    /* Loader */
    .loader{width:55px;height:55px;border:6px solid #f3f3f3;border-top:6px solid #dd2476;border-radius:50%;animation:spin 1s linear infinite;margin:20px auto;}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Welcome popup styles (from your earlier design) */
    .welcome-popup { position: fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.4); z-index:4000; }
    .welcome-card { background:#fff; padding:20px; border-radius:15px; width:85%; max-width:420px; text-align:center; animation: slideIn 550ms ease; }
    .welcome-card h2 { color:#e63946; font-size:24px; margin-bottom:8px; }
    .welcome-card p { text-align:justify; color:#333; line-height:1.6; margin:8px 0; }
    .welcome-card button { background:#e63946; color:#fff; border:none; padding:10px 18px; border-radius:8px; cursor:pointer; font-weight:700; margin-top:12px; }
    @keyframes slideIn{ from { transform: translateX(100%); opacity:0 } to { transform:translateX(0); opacity:1 } }

    /* User Task Panel Styles */
    .task-panel-body{font-family:sans-serif;background:#eef2f7;margin:0;padding:15px;}
    .task-header{text-align:center;margin-bottom:20px;}
    .task-header h2{margin:0;font-size:22px;font-weight:700;color:#222;}

    .notice-box{
      max-width:400px;margin:10px auto;
      background:#fff3cd;padding:12px;border-left:6px solid #ffa500;
      border-radius:10px;color:#333;
      font-weight:600;font-size:15px;display:none;
    }

    .user-info{max-width:400px;margin:10px auto;padding:10px;background:#fff;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,.12);}
    .user-info input{width:48%;padding:8px;margin-right:4%;border:1px solid #ccc;border-radius:6px;}
    .user-info button{padding:8px 12px;border:none;border-radius:6px;background:#4c6ef5;color:#fff;cursor:pointer;}

    .section-title{
      max-width:400px;
      margin:20px auto 10px;
      font-size:19px;
      font-weight:700;
      color:#222;
    }

    .task-list,.job-list{max-width:400px;margin:auto;}

    .task-item,.job-item{
      background:white;padding:12px;border-radius:12px;margin-bottom:14px;
      box-shadow:0 4px 14px rgba(0,0,0,.12);
    }

    .task-top,.job-top{
      display:flex;align-items:center;gap:12px;margin-bottom:8px;
    }

    .task-top img,.job-top img{
      width:40px;height:40px;border-radius:10px;
    }

    .task-title,.job-title{
      font-weight:600;font-size:16px;
    }

    .task-btn,.job-btn{
      padding:8px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:600;margin-top:8px;background:#4c6ef5;color:#fff;
    }

    .task-rule,.job-rule{
      display:none;background:#f1f3f5;padding:10px;border-radius:8px;margin-top:10px;font-size:14px;
    }

    .rule-buttons{display:flex;gap:10px;margin-top:10px;}
    .rule-buttons button{
      flex:1;padding:8px;border:none;border-radius:8px;cursor:pointer;font-weight:600;color:#fff;background:#12b886;
    }
    .rule-buttons button:last-child{background:#228be6;}

    .upload-list{margin-top:12px;}
    .upload-item{
      display:flex;align-items:center;gap:10px;background:#f8f9fa;padding:8px;border-radius:8px;margin-bottom:6px;
    }
    .upload-item img{width:40px;height:40px;border-radius:6px;cursor:pointer;}
    .status{font-weight:600;padding:2px 6px;border-radius:4px;color:#fff;font-size:12px;}
    .status.pending{background:#fab005;}
    .status.approved{background:#12b886;}
    .status.rejected{background:#f03e3e;}

    .empty-state{
      text-align:center;
      padding:40px 20px;
      color:#666;
    }
    .empty-state i{
      font-size:48px;
      margin-bottom:15px;
      color:#ccc;
    }

    @media (max-width:420px){.card-head h2{ font-size:18px } .gen-table th, .gen-table td{ padding:12px 10px; font-size:14px } .welcome{ font-size:14px }}
  </style>
</head>
<body>
  <div class="topbar">
    <a href="https://t.me/emergency57support38group" target="_blank" class="support-btn">üéß ‡¶á‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</a>
  </div>
  <header>
    <div class="logo"><div class="mark">T</div><div style="font-weight:700">Tash2Cash-ONLINE</div></div>
    <div class="hamburger" id="openDrawer">‚ò∞</div>
  </header>

  <!-- Drawer -->
  <div class="drawer" id="drawer">
    <!-- User Info in Drawer -->
    <div class="user-drawer-info" id="userDrawerInfo" style="display: none;">
      <div class="user-avatar" id="userAvatar">U</div>
      <div class="user-name" id="userName">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶®‡¶æ‡¶Æ</div>
      <div class="user-status inactive" id="userStatus">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º</div>
      <div class="user-details">
        <div>‡¶≤‡¶ø‡¶°‡¶æ‡¶∞ ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ï: ‡¶Ü‡¶∏‡¶®‡ßç‡¶®</div>
        <div id="userReferId">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
        <div id="joinDate">‡¶Ø‡ßã‡¶ó‡¶¶‡¶æ‡¶®: ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
      </div>
      <div class="refer-code-section">
        <div class="refer-code-label">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶°:</div>
        <div class="refer-code-value">
          <span id="userReferCode">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span>
          <button class="copy-refer-btn" onclick="copyReferCode()">‡¶ï‡¶™‡¶ø</button>
        </div>
      </div>
    </div>

    <h3>menu</h3>
    <a href="#" data-page="dashboardPage" class="nav-link">üìä Dashboard</a>
    <a href="#" data-page="walletPage" class="nav-link">üëõ Wallet</a>
    <a href="#" data-page="withdrawPage" class="nav-link">üí∏ Withdraw</a>
    <a href="#" id="openMyTeam" class="nav-link">üë• My Team</a>
    <a href="#" data-page="myJobPage" class="nav-link">üíº My Job</a>
    <a href="#" id="openGift" class="nav-link">üéÅ Use Your GiftCode</a>
    <a href="#" class="nav-link">üìã Job History</a>
    <a href="#" class="nav-link">üìû Helpline</a>
    <a href="#" id="logoutBtn">üö™ Logout</a>
  </div>

  <div class="overlay" id="overlay"></div>

  <!-- Welcome Popup (your requested jetted welcome) -->
  <div class="welcome-popup" id="welcomePopup">
    <div class="welcome-card">
      <h2>Welcome!</h2>
      <p>
        üíé <b>TASH2CASH ‚Äî ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡ßü‡ßá‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶¶‡¶ø‡¶ó‡¶®‡ßç‡¶§!</b><br><br>
        üåü TASH2CASH ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶®‡ßü, ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó‡•§  
        ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶π‡¶ú‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡¶Ü‡ßü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®, ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶ü‡¶ø‡¶Æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶≠ ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ó‡ßú‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®,  
        ‡¶Ü‡¶∞ ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü‡¶ï‡ßá ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‡¶™‡ßç‡¶∞‡¶ï‡ßÉ‡¶§ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡•§  
        <br><br>
        üí∞ ‡¶è‡¶ñ‡¶® ‡¶∏‡¶Æ‡ßü ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶æ‡¶∞, ‡¶∏‡¶Æ‡ßü TASH2CASH‚Äì‡¶è‡¶∞!  
        <br><br>
        üöÄ ‡¶Ü‡¶ú‡¶á ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø‡ßá‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‚Äî  
        <b>TASH2CASH: Earn Smart, Grow Fast!</b>
      </p>
      <button id="closeWelcomeBtn">Continue</button>
    </div>
  </div>

  <!-- Pages -->
  <main>
    <!-- Dashboard Page -->
    <section id="dashboardPage" class="page active">
      <main class="container">
        <div style="background:#000;padding:10px 12px;border-radius:6px;color:#fff;margin-bottom:12px;text-align:center;">
          ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡ß´ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡ß´‡ß¶‡ß¶-‡ßß‡ß¶‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®  MY NETWORK JOB ‡¶è ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ
        </div>

        <div class="notice" id="accountNotice">
          <h2 id="noticeTitle">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶®‡ßü</h2>
          <p id="noticeMessage">‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§</p>
          <button class="btn-red" onclick="openModal()">Active Now</button>
        </div>

        <div class="grid">
          <div class="card" style="background:#ffe082"><div class="amount"><i class="fa-solid fa-wallet"></i>BDT.<span id="totalIncome">0</span></div><div class="label">Total Income</div></div>
          <div class="card" style="background:#ef9a9a"><div class="amount"><i class="fa-solid fa-briefcase"></i>BDT.<span id="jobCommission">0</span></div><div class="label">Job Commission</div></div>
          <div class="card" style="background:#81d4fa"><div class="amount"><i class="fa-solid fa-user-plus"></i>BDT.<span id="referCommission">0</span></div><div class="label">Refer Commission</div></div>
          <div class="card" style="background:#ffcc80"><div class="amount"><i class="fa-solid fa-bullseye"></i>BDT.<span id="taskCommission">0</span></div><div class="label">Task Commission</div></div>
          <div class="card" style="background:#b39ddb"><div class="amount"><i class="fa-solid fa-envelope"></i>BDT.<span id="gmailCommission">0</span></div><div class="label">Gmail Commission</div></div>
          <div class="card" style="background:#90caf9"><div class="amount"><i class="fa-brands fa-facebook"></i>BDT.<span id="facebookCommission">0</span></div><div class="label">Facebook Commission</div></div>
        </div>
      </main>
    </section>

    <!-- Wallet Page -->
    <section id="walletPage" class="page">
      <div style="padding:18px">
        <h2>Wallet</h2>
        <p>‡¶è‡¶ñ‡¶æ‡¶®‡ßá Wallet ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá ‚Äî ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏, ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®, ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø‡•§</p>
      </div>
    </section>

    <!-- Withdraw Page -->
    <section id="withdrawPage" class="page">
      <div class="withdraw-header">üíé TASH2CASH Withdraw</div>
      <div class="withdraw-container">
        <h2>üí∞ Withdraw </h2>
        <form class="withdraw-form">
          <label for="withdrawMethod">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
          <select id="withdrawMethod">
            <option value="" disabled selected>-- ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
            <option value="Bkash">Bkash</option>
            <option value="Nagad">Nagad</option>
            <option value="Rocket">Rocket</option>
          </select>

          <label for="withdrawType1">‡¶ü‡¶æ‡¶á‡¶™ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (Personal / Agent):</label>
          <select id="withdrawType1">
            <option value="" disabled selected>-- ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
            <option value="Personal">Personal</option>
            <option value="Agent">Agent</option>
          </select>

          <label for="withdrawType2">‡¶ü‡¶æ‡¶á‡¶™ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (Refer / Job Withdraw):</label>
          <select id="withdrawType2">
            <option value="" disabled selected>-- ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
            <option value="Refer Withdraw">Refer Withdraw</option>
            <option value="Job Withdraw">Job Withdraw</option>
          </select>

          <label for="withdrawNumber">‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:</label>
          <input type="text" id="withdrawNumber" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®‡¶É 01XXXXXXXXX">

          <label for="withdrawAmount">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡ß≥):</label>
          <input type="number" id="withdrawAmount" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®‡¶É 500">

          <button type="button" class="withdraw-btn" id="withdrawRequestBtn">üì§ Withdraw ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
        </form>

        <div class="withdraw-history" id="withdrawHistory">
          <h3>üßæ Withdraw ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡¶∞‡¶ø</h3>
          <div id="withdrawHistoryList"></div>
        </div>
      </div>
    </section>

    <!-- My Team Page -->
    <section id="myTeamPage" class="page">
      <div class="welcome">
        <div class="marquee-text"><span>TASH2CASH</span> ‡¶è ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! <span>TASH2CASH Team Member Group‡•§</span></div>
      </div>
      <div class="team-container">
        <div class="card" role="region" aria-labelledby="generations-title">
          <div class="card-head">
            <h2 id="generations-title">My Generations</h2>
            <div class="team-size">My Team Size: <strong id="team-size">0</strong></div>
          </div>
          <table class="gen-table" aria-describedby="generation-list">
            <thead>
              <tr>
                <th class="sn">SN</th>
                <th>Generation</th>
              </tr>
            </thead>
            <tbody id="generation-list">
              <tr>
                <td class="sn">1</td>
                <td class="generation">Team LV~1. <span class="count" id="lv1">(0)</span></td>
              </tr>
              <tr>
                <td class="sn">2</td>
                <td class="generation">Team LV~2. <span class="count" id="lv2">(0)</span></td>
              </tr>
              <tr>
                <td class="sn">3</td>
                <td class="generation">Team LV~3. <span class="count" id="lv3">(0)</span></td>
              </tr>
              <tr>
                <td class="sn">4</td>
                <td class="generation">Team LV~4. <span class="count" id="lv4">(0)</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- My Job Page - Your Task Panel -->
    <section id="myJobPage" class="page">
      <div class="task-panel-body">
        <div class="task-header"><h2>Task Earn Panel</h2></div>

        <!-- üîî Notice Box -->
        <div id="noticeBox" class="notice-box"></div>

        <div class="user-info">
          <input type="text" id="accountID" placeholder="Account ID">
          <input type="text" id="userName" placeholder="Name">
          <button onclick="saveUserInfo()">Save</button>
        </div>

        <!-- TASK SECTION -->
        <div class="section-title">üîπ Today Tasks</div>
        <div class="task-list" id="taskArea"></div>

        <!-- MY JOB SECTION -->
        <div class="section-title">üîπ My Job</div>
        <div class="job-list" id="jobArea"></div>

        <!-- UPLOAD SECTION -->
        <div class="upload-list" id="uploadList"></div>
      </div>
    </section>
  </main>

  <!-- Work List Modal -->
  <div class="modal" id="workListModal">
    <div class="modal-content">
      <h2>‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</h2>
      <ul>
        <li>üìß Gmail Verification</li>
        <li>üëç Facebook Like & Share</li>
        <li>üë• Refer & Earn</li>
        <li>üìù Task Complete</li>
      </ul>
      <button style="margin-top:15px;background:#f44336;color:#fff;padding:8px 14px;border:none;border-radius:6px;cursor:pointer" onclick="closeWorkList()">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="modal" id="paymentModal">
    <div class="modal-content">
      <h2>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
      <div class="grid-pay">
        <div class="pay-btn" onclick="selectPayment('bKash')">bKash</div>
        <div class="pay-btn" onclick="selectPayment('Nagad')">Nagad</div>
      </div>
      <div id="modalNotice">
        <span id="noticeText"></span>
        <div id="noticeButtons">
          <button onclick="confirmPayment()" style="padding:8px 16px;margin-right:10px;background:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;">‡¶ì‡¶ï‡ßá</button>
          <button onclick="cancelPayment()" style="padding:8px 16px;background:#f44336;color:#fff;border:none;border-radius:6px;cursor:pointer;">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
        </div>
      </div>
      <button class="pay-now" onclick="payNow()">Pay ‡ß≥2</button>
      <button style="margin-top:10px;background:#ccc;color:#000;border:none;padding:8px 14px;border-radius:6px;cursor:pointer" onclick="closeModal()">‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</button>
    </div>
  </div>

  <!-- Transaction Modal -->
  <div class="modal" id="transactionModal">
    <div class="modal-content">
      <h2>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®</h2>
      <p id="paymentInstruction">‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá <b>Send Money</b> ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç Transaction ID ‡¶¶‡¶ø‡¶®‡•§</p>
      <div class="form-group">
        <label>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: <b id="paymentNumber">01986755106</b>
          <button class="copy-btn" onclick="copyNumber()">Copy</button>
        </label>
      </div>
      <div class="form-group">
        <label>Transaction ID:</label>
        <input type="text" id="trxId" placeholder="TXN12345" />
      </div>
      <button class="verify-btn" onclick="verifyPayment()">VERIFY</button>
      <button class="cancel-btn" onclick="closeTransactionModal()">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
    </div>
  </div>

  <!-- Refer Code Modal -->
  <div class="modal" id="referCodeModal">
    <div class="modal-content">
      <h2>‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶°</h2>
      <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶Ø‡ßá ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶® ‡¶§‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®:</p>
      <div class="form-group">
        <label>‡¶Ø‡ßá ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®:</label>
        <input type="text" id="referNumber" placeholder="01XXXXXXXXX" />
      </div>
      <div class="form-group">
        <label>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø:</label>
        <input type="text" id="referTrxId" placeholder="TXN12345" />
      </div>
      <button class="verify-btn" onclick="submitReferCode()">‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      <button class="cancel-btn" onclick="closeReferCodeModal()">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
    </div>
  </div>

  <!-- Authentication Modal -->
  <div class="modal" id="authModal">
    <div class="modal-content">
      <div class="auth-tabs">
        <div class="auth-tab active" id="loginTab">‡¶≤‡¶ó‡¶á‡¶®</div>
        <div class="auth-tab" id="signupTab">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™</div>
      </div>

      <!-- Login Form -->
      <div class="auth-form active" id="loginForm">
        <h2>‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
        <div class="form-group">
          <label>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞:</label>
          <input type="text" id="loginNumber" placeholder="01XXXXXXXXX" />
        </div>
        <div class="form-group">
          <label>‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°:</label>
          <input type="password" id="loginPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®" />
        </div>
        <button class="verify-btn" onclick="login()">‡¶≤‡¶ó‡¶á‡¶®</button>
        <div class="toggle-auth" onclick="showSignup()">‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á? ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</div>
      </div>

      <!-- Signup Form -->
      <div class="auth-form" id="signupForm">
        <h2>‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
        <div class="form-group">
          <label>‡¶®‡¶æ‡¶Æ:</label>
          <input type="text" id="name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" />
        </div>
        <div class="form-group">
          <label>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞:</label>
          <input type="text" id="signupNumber" placeholder="01XXXXXXXXX" />
        </div>
        <div class="form-group">
          <label>‡¶ú‡¶ø‡¶Æ‡ßá‡¶á‡¶≤:</label>
          <input type="email" id="email" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤" />
        </div>
        <div class="form-group">
          <label>‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):</label>
          <input type="text" id="referCode" placeholder="‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)" />
        </div>
        <div class="form-group">
          <label>‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°:</label>
          <input type="password" id="signupPassword" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®" />
        </div>
        <button class="verify-btn" onclick="signup()">‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™</button>
        <div class="toggle-auth" onclick="showLogin()">‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</div>
      </div>
    </div>
  </div>

  <!-- Toast Box -->
  <div id="toast" class="toast"></div>

  <script>
    // --- basic state ---
    let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    let userName = localStorage.getItem('userName') || '';
    let userReferCode = localStorage.getItem('userReferCode') || '';
    let userReferId = localStorage.getItem('userReferId') || '';
    let joinDate = localStorage.getItem('joinDate') || '';

    // payment numbers
    const paymentNumbers = { 'bKash': '01986755106', 'Nagad': '01876543210' };
    let selectedPayment = null;
    let currentPaymentNumber = '';

    // utility helpers
    function generateReferCode() { return 'REF' + Math.floor(100000000 + Math.random() * 900000000); }
    function generateReferId() { return Math.floor(100000000 + Math.random() * 900000000).toString(); }
    function getCurrentDate() {
      const months = ['‡¶ú‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø','‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø','‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö','‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤','‡¶Æ‡ßá','‡¶ú‡ßÅ‡¶®','‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á','‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü','‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞','‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞','‡¶®‡¶≠‡ßá‡¶Æ‡ßç‡¶¨‡¶∞','‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞'];
      const days = ['‡¶∞‡¶¨‡¶ø','‡¶∏‡ßã‡¶Æ','‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤','‡¶¨‡ßÅ‡¶ß','‡¶¨‡ßÉ‡¶π','‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞','‡¶∂‡¶®‡¶ø'];
      const now = new Date(); return `${days[now.getDay()]} ${months[now.getMonth()]} ${now.getFullYear()}`;
    }

    // show toast
    let toastTimeout;
    function showToast(message){
      const toast = document.getElementById('toast');
      toast.innerText = message; toast.classList.remove('show'); clearTimeout(toastTimeout);
      setTimeout(()=>{toast.classList.add('show');},100);
      toastTimeout = setTimeout(()=>{toast.classList.remove('show');},3000);
    }

    // Update user info in drawer
    function updateUserInfoInDrawer() {
      const userDrawerInfo = document.getElementById('userDrawerInfo');
      const userNameElement = document.getElementById('userName');
      const userAvatar = document.getElementById('userAvatar');
      const userStatus = document.getElementById('userStatus');
      const userReferCodeElement = document.getElementById('userReferCode');
      const userReferIdElement = document.getElementById('userReferId');
      const joinDateElement = document.getElementById('joinDate');

      if (localStorage.getItem('isLoggedIn') === 'true') {
        userDrawerInfo.style.display = 'block';
        userName = localStorage.getItem('userName') || '‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ';
        userReferCode = localStorage.getItem('userReferCode') || '';
        userReferId = localStorage.getItem('userReferId') || '';
        joinDate = localStorage.getItem('joinDate') || '';

        userNameElement.textContent = userName;
        userAvatar.textContent = userName.charAt(0).toUpperCase();
        userReferCodeElement.textContent = userReferCode;
        userReferIdElement.textContent = `‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: ${userReferId}`;
        joinDateElement.textContent = `‡¶Ø‡ßã‡¶ó‡¶¶‡¶æ‡¶®: ${joinDate}`;

        const isActive = localStorage.getItem('isActive') === 'true';
        if (isActive) { userStatus.textContent = '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º'; userStatus.className = 'user-status active';
        } else { userStatus.textContent = '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º'; userStatus.className = 'user-status inactive'; }
      } else {
        userDrawerInfo.style.display = 'none';
      }
    }

    // copy refer code
    function copyReferCode(){ const referCode = document.getElementById('userReferCode').textContent; const ta = document.createElement('textarea'); ta.value = referCode; document.body.appendChild(ta); ta.select(); ta.setSelectionRange(0,99999);
      try { document.execCommand('copy'); showToast('üìã ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‚úÖ ‡¶è‡¶ñ‡¶® ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®!'); } catch(e){ showToast('‚ùå ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá'); }
      document.body.removeChild(ta);
    }

    // Drawer open/close
    const drawer = document.getElementById('drawer'); const overlay = document.getElementById('overlay');
    document.getElementById('openDrawer').addEventListener('click', ()=>{
      if (localStorage.getItem('isLoggedIn') === 'true') { drawer.classList.add('open'); overlay.classList.add('show'); }
      else { document.getElementById('authModal').classList.add('show'); showToast('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®'); }
    });
    overlay.addEventListener('click', ()=>{ drawer.classList.remove('open'); overlay.classList.remove('show'); });

    // page navigation
    function showPage(pageId){ document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); document.getElementById(pageId).classList.add('active'); drawer.classList.remove('open'); overlay.classList.remove('show'); window.scrollTo(0,0); }

    document.querySelectorAll('.nav-link[data-page]').forEach(a=>{
      a.addEventListener('click', (e)=>{ e.preventDefault(); const page = a.getAttribute('data-page'); showPage(page); });
    });

    // special nav actions
    document.getElementById('openMyTeam').addEventListener('click',(e)=>{ e.preventDefault(); if (localStorage.getItem('isLoggedIn')==='true'){ showPage('myTeamPage'); } else { showToast('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®'); document.getElementById('authModal').classList.add('show'); } });

    // close worklist
    function closeWorkList(){ document.getElementById('workListModal').classList.remove('show'); }

    // Payment modal flow
    function openModal(){ document.getElementById('paymentModal').classList.add('show'); }
    function closeModal(){ document.getElementById('paymentModal').classList.remove('show'); selectedPayment = null; document.getElementById('modalNotice').style.display='none'; }
    function selectPayment(method){ selectedPayment = method; currentPaymentNumber = paymentNumbers[method]; document.getElementById('modalNotice').style.display='block'; document.getElementById('noticeText').innerText = method + ' ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá ‚úÖ'; document.getElementById('noticeButtons').style.display='none'; }
    function payNow(){ if(selectedPayment){ document.getElementById('modalNotice').style.display='block'; document.getElementById('noticeText').innerText = '‡¶Ü‡¶™‡¶®‡¶ø '+selectedPayment+' ‡¶¶‡¶ø‡ßü‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶® üí≥'; document.getElementById('noticeButtons').style.display='block'; } else { document.getElementById('modalNotice').style.display='block'; document.getElementById('noticeText').innerText = '‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ‚ö†Ô∏è'; document.getElementById('noticeButtons').style.display='none'; } }
    function confirmPayment(){ document.getElementById('paymentModal').classList.remove('show'); document.getElementById('paymentNumber').innerText = currentPaymentNumber; document.getElementById('paymentInstruction').innerHTML = `‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ <b>${selectedPayment}</b> ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞‡ßá <b>Send Money</b> ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç Transaction ID ‡¶¶‡¶ø‡¶®‡•§`; document.getElementById('transactionModal').classList.add('show'); }
    function cancelPayment(){ document.getElementById('modalNotice').style.display='none'; }
    function closeTransactionModal(){ document.getElementById('transactionModal').classList.remove('show'); }
    function copyNumber(){ const number = document.getElementById('paymentNumber').innerText; const ta = document.createElement('textarea'); ta.value = number; document.body.appendChild(ta); ta.select(); ta.setSelectionRange(0,99999); try{ document.execCommand('copy'); showToast('üìã ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‚úÖ ‡¶è‡¶ñ‡¶® Send Money ‡¶ï‡¶∞‡ßÅ‡¶®‡•§'); }catch(e){ showToast('‚ùå ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá'); } document.body.removeChild(ta); }
    function verifyPayment(){ const trx = document.getElementById('trxId').value.trim(); if(trx){ showToast('Transaction ID '+trx+' ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‚úÖ'); closeTransactionModal(); updateNotice('success','‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®!','‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶π‡ßü‡ßá‡¶õ‡ßá!'); localStorage.setItem('isActive','true'); updateUserInfoInDrawer(); } else { showToast('‚ö†Ô∏è ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá Transaction ID ‡¶¶‡¶ø‡¶®'); } }

    // Withdraw modal (old)
    function closeWithdrawModal(){ document.getElementById('withdrawModal').classList.remove('show'); }
    function submitWithdraw(){ const method = document.getElementById('withdrawMethod').value; const number = document.getElementById('withdrawNumber').value; const amount = document.getElementById('withdrawAmount').value; if(method && number && amount){ showToast('‚úÖ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá | Method: '+method+' | Number: '+number+' | Amount: ‡ß≥'+amount); closeWithdrawModal(); } else { showToast('‚ö†Ô∏è ‡¶∏‡¶¨ ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®'); } }

    // Refer code modal
    function closeReferCodeModal(){ document.getElementById('referCodeModal').classList.remove('show'); }
    function submitReferCode(){ const number = document.getElementById('referNumber').value; const trxId = document.getElementById('referTrxId').value; if(number && trxId){ showToast('‚úÖ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡ßã‡¶° ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá | Number: '+number+' | Trx ID: '+trxId); closeReferCodeModal(); } else { showToast('‚ö†Ô∏è ‡¶∏‡¶¨ ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®'); } }

    // Auth helpers
    function showLogin(){ document.getElementById('loginTab').classList.add('active'); document.getElementById('signupTab').classList.remove('active'); document.getElementById('loginForm').classList.add('active'); document.getElementById('signupForm').classList.remove('active'); }
    function showSignup(){ document.getElementById('signupTab').classList.add('active'); document.getElementById('loginTab').classList.remove('active'); document.getElementById('signupForm').classList.add('active'); document.getElementById('loginForm').classList.remove('active'); }

    // ---- Welcome popup controls ----
    const welcomePopupEl = document.getElementById('welcomePopup');
    const closeWelcomeBtn = document.getElementById('closeWelcomeBtn');

    function showWelcomePopup() {
      welcomePopupEl.style.display = 'flex';
    }
    function hideWelcomePopup() {
      welcomePopupEl.style.display = 'none';
    }
    closeWelcomeBtn.addEventListener('click', hideWelcomePopup);

    // Login and signup with welcome popup trigger
    function signup(){
      const name = document.getElementById('name').value.trim();
      const number = document.getElementById('signupNumber').value.trim();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('signupPassword').value.trim();
      if(!name || !number || !email || !password){ showToast('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®'); return; }
      if(number.length !== 11){ showToast('‡¶∏‡¶†‡¶ø‡¶ï ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶® (11 ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü)'); return; }
      const newReferCode = generateReferCode();
      const newReferId = generateReferId();
      const currentDate = getCurrentDate();
      localStorage.setItem('isLoggedIn','true');
      localStorage.setItem('userName',name);
      localStorage.setItem('userEmail',email);
      localStorage.setItem('userNumber',number);
      localStorage.setItem('userReferCode',newReferCode);
      localStorage.setItem('userReferId',newReferId);
      localStorage.setItem('joinDate',currentDate);
      localStorage.setItem('userPassword',password);
      localStorage.setItem('isActive','false');
      document.getElementById('authModal').classList.remove('show');
      showToast('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! üéâ');
      updateUserInfoInDrawer();
      updateNotice('warning','‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!','‡¶è‡¶ñ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡ßß‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®.');

      // show welcome popup after signup (as requested)
      setTimeout(showWelcomePopup, 350);
    }

    function login(){
      const number = document.getElementById('loginNumber').value.trim();
      const password = document.getElementById('loginPassword').value.trim();
      const savedNumber = localStorage.getItem('userNumber');
      const savedPassword = localStorage.getItem('userPassword');
      if(!number||!password){ showToast('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®'); return; }
      if(number === savedNumber && password === savedPassword){
        localStorage.setItem('isLoggedIn','true');
        document.getElementById('authModal').classList.remove('show');
        showToast('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! üéâ');
        updateUserInfoInDrawer();
        updateNotice('info','‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!','‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶è‡¶ñ‡¶® ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®!');

        // show welcome popup after login (as requested)
        setTimeout(showWelcomePopup, 350);
      } else { showToast('‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤'); }
    }

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', function(e){ e.preventDefault(); localStorage.setItem('isLoggedIn','false'); showToast('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá'); setTimeout(()=>{ location.reload(); },800); });

    // Notice update
    function updateNotice(type,title,message){ const notice = document.getElementById('accountNotice'); const noticeTitle = document.getElementById('noticeTitle'); const noticeMessage = document.getElementById('noticeMessage'); noticeTitle.innerText = title; noticeMessage.innerText = message; switch(type){ case 'success': notice.style.background = '#4caf50'; break; case 'warning': notice.style.background = '#ff9800'; break; case 'error': notice.style.background = '#f44336'; break; case 'info': notice.style.background = '#2196f3'; break; default: notice.style.background = '#39a56a'; } }

    // Auto notice rotation demo
    let noticeIndex = 0; const notices = [{type:'error',title:'‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶®‡ßü',message:'‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§'},{type:'warning',title:'‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶®‡ßü',message:'‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§'},{type:'info',title:'‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶®‡ßü',message:'‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§'},{type:'success',title:'‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶®‡ßü',message:'‡¶è‡¶ï‡¶ü‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§'}];
    setInterval(()=>{ if(localStorage.getItem('isLoggedIn')==='true'){ updateNotice(notices[noticeIndex].type,notices[noticeIndex].title,notices[noticeIndex].message); noticeIndex=(noticeIndex+1)%notices.length; } },10000);

    // Withdraw System Functions
    const withdrawType2 = document.getElementById('withdrawType2');
    const withdrawAmount = document.getElementById('withdrawAmount');
    const withdrawRequestBtn = document.getElementById('withdrawRequestBtn');
    const withdrawHistoryList = document.getElementById('withdrawHistoryList');

    // üí° Withdraw ‡¶ü‡¶æ‡¶á‡¶™ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ placeholder ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
    withdrawType2.addEventListener('change', function(){
      if(this.value === 'Refer Withdraw'){
        withdrawAmount.placeholder = '‡¶Ø‡ßá‡¶Æ‡¶®‡¶É ‡ß®‡ß¶ ‚Äì ‡ß®‡ß´,‡ß¶‡ß¶‡ß¶';
      } else if(this.value === 'Job Withdraw'){
        withdrawAmount.placeholder = '‡¶Ø‡ßá‡¶Æ‡¶®‡¶É ‡ß®‡ß¶‡ß¶ ‚Äì ‡ß®‡ß´,‡ß¶‡ß¶‡ß¶';
      } else {
        withdrawAmount.placeholder = '‡¶Ø‡ßá‡¶Æ‡¶®‡¶É 500';
      }
    });

    function createWithdrawCard({method, type1, type2, number, amount, status}){
      const div = document.createElement('div');
      div.className = 'withdraw-card';
      div.innerHTML = `
        <p><b>‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ:</b> ${method}</p>
        <p><b>‡¶ü‡¶æ‡¶á‡¶™:</b> ${type1} | ${type2}</p>
        <p><b>‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞:</b> ${number}</p>
        <p><b>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</b> ${amount}‡ß≥</p>
        <p><b>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ:</b> <span class="${status.toLowerCase()}">${status}</span></p>`;
      return div;
    }

    function submitWithdrawRequest(){
      const method = document.getElementById('withdrawMethod').value;
      const type1 = document.getElementById('withdrawType1').value;
      const type2 = document.getElementById('withdrawType2').value;
      const number = document.getElementById('withdrawNumber').value.trim();
      const amount = document.getElementById('withdrawAmount').value.trim();

      if(!method){showToast('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');return;}
      if(!type1){showToast('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá Personal / Agent ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');return;}
      if(!type2){showToast('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá Refer / Job Withdraw ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');return;}
      if(!number || !amount){showToast('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ì ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');return;}

      const amt = Number(amount);
      if(type2 === "Refer Withdraw" && (amt < 20 || amt > 25000)){
        showToast('Refer Withdraw ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡ß®‡ß´,‡ß¶‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§');
        return;
      }
      if(type2 === "Job Withdraw" && (amt < 200 || amt > 25000)){
        showToast('Job Withdraw ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß®‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡ß®‡ß´,‡ß¶‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§');
        return;
      }

      withdrawRequestBtn.disabled = true;
      showToast('Withdraw request processing...');

      setTimeout(() => {
        const card = createWithdrawCard({method, type1, type2, number, amount, status: 'Pending'});
        withdrawHistoryList.prepend(card);
        showToast('‚úÖ Withdraw ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');

        // Clear form
        document.getElementById('withdrawNumber').value = '';
        document.getElementById('withdrawAmount').value = '';
        withdrawRequestBtn.disabled = false;

        // Save to localStorage
        saveWithdrawHistory({method, type1, type2, number, amount, status: 'Pending', date: new Date().toLocaleString()});
      }, 2000);
    }

    function saveWithdrawHistory(withdrawData) {
      let history = JSON.parse(localStorage.getItem('withdrawHistory') || '[]');
      history.unshift(withdrawData);
      localStorage.setItem('withdrawHistory', JSON.stringify(history));
    }

    function loadWithdrawHistory() {
      const history = JSON.parse(localStorage.getItem('withdrawHistory') || '[]');
      withdrawHistoryList.innerHTML = '';

      if (history.length === 0) {
        withdrawHistoryList.innerHTML = '<p style="text-align:center;color:#666;">‡¶ï‡ßã‡¶®‡ßã Withdraw ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶®‡ßá‡¶á</p>';
        return;
      }

      history.forEach(item => {
        const card = createWithdrawCard(item);
        withdrawHistoryList.appendChild(card);
      });
    }

    /* ===== User Task Panel Functions ===== */
    function loadNotice(){
      const box = document.getElementById("noticeBox");
      const notice = localStorage.getItem("notice") || "";

      if(notice.trim() === ""){
        box.style.display = "none";
      } else {
        box.innerText = "üîî Notice: " + notice;
        box.style.display = "block";
      }
    }

    function getTasks(){
      return JSON.parse(localStorage.getItem("tasks") || "[]");
    }

    function getJobs(){
      return JSON.parse(localStorage.getItem("myjobs") || "[]");
    }

    let userInfo = JSON.parse(localStorage.getItem("userInfo")||"{}");

    if(userInfo.id) document.getElementById('accountID').value = userInfo.id;
    if(userInfo.name) document.getElementById('userName').value = userInfo.name;

    function saveUserInfo(){
      const id = document.getElementById('accountID').value.trim();
      const name = document.getElementById('userName').value.trim();
      if(!id || !name) return showToast("Account ID & ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶®");

      userInfo = {id,name};
      localStorage.setItem("userInfo", JSON.stringify(userInfo));

      loadTasks();
      loadJobs();
      loadUploads();
      showToast("Saved ‚úî");
    }

    function loadTasks(){
      const area = document.getElementById("taskArea");
      area.innerHTML = "";

      if(!userInfo.id) return;

      const tasks = getTasks();

      if(tasks.length === 0) {
        area.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-tasks"></i>
            <h3>‡¶ï‡ßã‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶®‡ßá‡¶á</h3>
            <p>‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶¨‡ßá‡¶®‡•§</p>
          </div>
        `;
        return;
      }

      tasks.forEach(t=>{
        const div = document.createElement("div");
        div.className="task-item";

        div.innerHTML=`
          <div class="task-top">
            <img src="${t.icon}">
            <div class="task-title">${t.title} - ‡ß≥${t.reward}</div>
          </div>

          <button class="task-btn" onclick="toggleRule(this)">Do</button>

          <div class="task-rule">
            ${t.desc}
            <div class="rule-buttons">
              <button onclick="window.open('${t.link}', '_blank')">Open</button>
              <button onclick="uploadImage('${t.title}')">Upload Proof</button>
            </div>
          </div>
        `;

        area.appendChild(div);
      });
    }

    function loadJobs(){
      const area = document.getElementById("jobArea");
      area.innerHTML = "";

      if(!userInfo.id) return;

      const jobs = getJobs();

      if(jobs.length === 0) {
        area.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-briefcase"></i>
            <h3>‡¶ï‡ßã‡¶® ‡¶ú‡¶¨ ‡¶®‡ßá‡¶á</h3>
            <p>‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶ú‡¶¨ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶®‡¶§‡ßÅ‡¶® ‡¶ú‡¶¨ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶¨‡ßá‡¶®‡•§</p>
          </div>
        `;
        return;
      }

      jobs.forEach(j=>{
        const div = document.createElement("div");
        div.className="job-item";

        div.innerHTML=`
          <div class="job-top">
            <img src="${j.icon}">
            <div class="job-title">${j.title} - ‡ß≥${j.pay}</div>
          </div>

          <button class="job-btn" onclick="toggleRule(this)">Start</button>

          <div class="job-rule">
            ${j.desc}
            <div class="rule-buttons">
              <button onclick="window.open('${j.link}', '_blank')">Open</button>
              <button onclick="uploadImage('${j.title}')">Upload Proof</button>
            </div>
          </div>
        `;

        area.appendChild(div);
      });
    }

    function toggleRule(btn){
      const rule = btn.nextElementSibling;
      rule.style.display = rule.style.display=="block"?"none":"block";
    }

    function uploadImage(taskName){
      if(!userInfo.id) return showToast("‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá Account ID ‡¶¶‡¶ø‡¶®");

      const input = document.createElement("input");
      input.type="file";
      input.accept="image/*";

      input.onchange=e=>{
        const file = e.target.files[0];
        if(!file) return;

        const reader = new FileReader();
        reader.onload = ()=>{

          let uploads = JSON.parse(localStorage.getItem("uploadedImages")||"[]");

          uploads.unshift({
            id:Date.now(),
            accountID:userInfo.id,
            name:userInfo.name,
            task:taskName,
            data:reader.result,
            time:Date.now(),
            status:"pending"
          });

          localStorage.setItem("uploadedImages",JSON.stringify(uploads));
          loadUploads();
          showToast("Submitted ‚úî");
        };

        reader.readAsDataURL(file);
      };

      input.click();
    }

    function loadUploads(){
      const list = document.getElementById("uploadList");

      const uploads = JSON.parse(localStorage.getItem("uploadedImages")||"[]")
      .filter(u=>u.accountID===userInfo.id);

      list.innerHTML = "";

      if(uploads.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-cloud-upload-alt"></i>
            <h3>‡¶ï‡ßã‡¶® ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶∂‡¶® ‡¶®‡ßá‡¶á</h3>
            <p>‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶æ‡¶ú ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßá‡¶®‡¶®‡¶ø‡•§</p>
          </div>
        `;
        return;
      }

      uploads.forEach(u=>{
        list.innerHTML += `
          <div class="upload-item">
            <img src="${u.data}">
            <div>
              <div>Task: ${u.task}</div>
              <div>Status: <span class="status ${u.status}">${u.status}</span></div>
            </div>
          </div>
        `;
      });
    }

    // Initialize UI on load
    window.addEventListener('DOMContentLoaded', ()=>{
      if(localStorage.getItem('isLoggedIn')!=='true'){
        document.getElementById('authModal').classList.add('show');
      }
      updateUserInfoInDrawer();

      // load team counts from localStorage (demo)
      const lv1 = localStorage.getItem('team_lv1') || '0';
      const lv2 = localStorage.getItem('team_lv2') || '0';
      const lv3 = localStorage.getItem('team_lv3') || '0';
      const lv4 = localStorage.getItem('team_lv4') || '0';
      document.getElementById('lv1').innerText = `(${lv1})`;
      document.getElementById('lv2').innerText = `(${lv2})`;
      document.getElementById('lv3').innerText = `(${lv3})`;
      document.getElementById('lv4').innerText = `(${lv4})`;
      const total = [+lv1,+lv2,+lv3,+lv4].reduce((a,b)=>a+b,0);
      document.getElementById('team-size').innerText = total;

      // Load withdraw history
      loadWithdrawHistory();

      // Set up withdraw button
      withdrawRequestBtn.addEventListener('click', submitWithdrawRequest);

      // Initialize task panel
      loadNotice();
      loadTasks();
      loadJobs();
      loadUploads();

      // show dashboard by default
      showPage('dashboardPage');
    });

    // Admin functions for adding tasks/jobs (for testing)
    window.__admin = {
      addTask(taskData) {
        const tasks = getTasks();
        tasks.push(taskData);
        localStorage.setItem("tasks", JSON.stringify(tasks));
        loadTasks();
        showToast("‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
      },
      
      addJob(jobData) {
        const jobs = getJobs();
        jobs.push(jobData);
        localStorage.setItem("myjobs", JSON.stringify(jobs));
        loadJobs();
        showToast("‡¶ú‡¶¨ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
      },
      
      setNotice(text) {
        localStorage.setItem("notice", text);
        loadNotice();
        showToast("‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
      },
      
      clearAll() {
        localStorage.removeItem("tasks");
        localStorage.removeItem("myjobs");
        localStorage.removeItem("notice");
        loadTasks();
        loadJobs();
        loadNotice();
        showToast("‡¶∏‡¶¨ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
      }
    };

    // Close welcome popup automatically if user already saw it in this session? (optional)
    // We intentionally show popup only after login/signup as you requested.
    // Expose helpers for console/testing
    window.__tash2 = {
      addToTeam(level, count=1){ const key = `team_lv${level}`; const prev = parseInt(localStorage.getItem(key)||'0',10); localStorage.setItem(key, prev+count); location.reload(); },
      resetTeam(){ [1,2,3,4].forEach(l=>localStorage.removeItem(`team_lv${l}`)); location.reload(); },
      addWithdrawHistory(){
        const testData = {
          method: 'Bkash',
          type1: 'Personal',
          type2: 'Job Withdraw',
          number: '017XXXXXXXX',
          amount: '500',
          status: 'Pending',
          date: new Date().toLocaleString()
        };
        saveWithdrawHistory(testData);
        loadWithdrawHistory();
        showToast('Test withdraw history added');
      }
    };

  </script>
</body>
</html>